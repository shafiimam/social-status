<div
  class="hero-slideshow"
  data-flickity='{ "cellAlign": "left", "contain": true, "prevNextButtons": true, "pageDots": false, "wrapAround": true, "autoPlay": 5000 }'
>
  {%- for block in section.blocks -%}
    <div class="hero-slide" {{ block.shopify_attributes }}>
      {%- if block.settings.image != blank -%}
        <div class="hero-slide__image-wrapper">
          <picture>
            {%- if block.settings.image_mobile != blank -%}
              <source srcset="{{ block.settings.image_mobile | image_url: width: 800 }}" media="(max-width: 768px)">
            {%- endif -%}
            <img
              src="{{ block.settings.image | image_url: width: 2000 }}"
              alt="{{ block.settings.title | escape }}"
              loading="lazy"
              width="{{ block.settings.image.width }}"
              height="{{ block.settings.image.height }}"
            >
          </picture>
        </div>
      {%- endif -%}

      <div class="hero-slide__content-overlay" style="background-color: rgba(0, 0, 0, {{ block.settings.overlay_opacity }}%);"></div>
      <div class="hero-slide__content" style="top: {{ block.settings.content_position_x }}%;">
        <div class="hero-slide__content-inner">
          {%- if block.settings.title != blank -%}
            <h1 class="hero-slide__title h1" style="color: {{ block.settings.text_color }};">
              {{ block.settings.title }}
            </h1>
          {%- endif -%}

          {%- if block.settings.subtitle != blank -%}
            <h2 class="hero-slide__subtitle h2" style="color: {{ block.settings.text_color }};">
              {{ block.settings.subtitle }}
            </h2>
          {%- endif -%}
        </div>

        {%- if block.settings.button_text != blank and block.settings.button_link != blank -%}
          <a
            class="button button--solid button--with-icon"
            style="background-color: {{ block.settings.button_color }};"
            {% unless block.settings.button_link == blank %}
              href="{{ block.settings.button_link }}"
            {% endunless %}
          >
            <span> {{ block.settings.button_text | escape }}</span>
            <span class="icon" aria-hidden="true">{%- render 'theme-symbols', icon: 'arrow-right' -%}</span>
          </a>
        {%- endif -%}
      </div>
    </div>
  {%- endfor -%}
</div>
{{ 'section-hero-slideshow.css' | asset_url | stylesheet_tag }}
{% schema %}
{
  "name": "Hero Slideshow",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Image (Mobile)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color"
        },
        {
          "type": "color",
          "id": "button_color",
          "label": "Button Color"
        },
        {
          "type": "header",
          "content": "Content Position"
        },
        {
          "type": "range",
          "id": "content_position_x",
          "label": "Content Position X",
          "unit": "%",
          "min": 0,
          "max": 75,
          "step": 1,
          "default": 50
        },
        {
         "type": "range",
         "id": "overlay_opacity",
         "label": "Overlay Intensity",
         "unit": "%",
         "min": 0,
         "max": 100,
         "step": 1,
         "default": 20
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Slideshow"
    }
  ]
}
{% endschema %}
